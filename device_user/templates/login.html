{% extends "base.html" %}

{% block title %}ç”¨æˆ·ç™»å½• - è®¾å¤‡ç®¡ç†ç³»ç»Ÿ{% endblock %}

{% set show_nav = false %}

{% block content %}
<div class="auth-page">
    <div class="auth-logo">
        <div class="logo-icon">ğŸ“±</div>
        <h1>è½¦è½½æµ‹è¯•è®¾å¤‡ç®¡ç†ç³»ç»Ÿ</h1>
        <p>è®¾å¤‡å€Ÿç”¨ Â· å½’è¿˜ Â· ç®¡ç†</p>
    </div>
    
    <div class="login-container">
        <!-- å·¦ä¾§ï¼šäºŒç»´ç åŒºåŸŸ -->
        <div class="qr-section">
            <h3>ğŸ“· å¾®ä¿¡æ‰«ç ç™»å½•</h3>
            <div class="qr-code-box">
                <img src="{{ url_for('login_qrcode') }}" alt="ç™»å½•äºŒç»´ç " class="qr-image" id="qrImage">
                <p class="qr-tip">è¯·ä½¿ç”¨å¾®ä¿¡æ‰«ç è®¿é—®ç³»ç»Ÿ</p>
                <p class="qr-refresh" onclick="refreshQRCode()">ğŸ”„ åˆ·æ–°äºŒç»´ç </p>
            </div>
        </div>
        
        <!-- å³ä¾§ï¼šç™»å½•è¡¨å• -->
        <div class="auth-content login-form-section">
            <h3>ğŸ” è´¦å·å¯†ç ç™»å½•</h3>
            <form method="POST" action="{{ url_for('login') }}">
                <div class="form-group">
                    <label for="phone">æ‰‹æœºå·</label>
                    <input type="tel" id="phone" name="phone" class="form-control" placeholder="è¯·è¾“å…¥æ‰‹æœºå·" required pattern="[0-9]{11}">
                </div>
                
                <div class="form-group">
                    <label for="password">å¯†ç </label>
                    <input type="password" id="password" name="password" class="form-control" placeholder="è¯·è¾“å…¥å¯†ç " required>
                </div>
                
                {% if error %}
                <div class="alert alert-error">{{ error }}</div>
                {% endif %}
                
                <button type="submit" class="btn btn-primary btn-large" style="width: 100%; margin-top: 20px;">
                    ç™»å½•
                </button>
            </form>
            
            <p class="auth-tips" style="margin-top: 20px;">
                æµ‹è¯•è´¦å·: 13800138001 / 123456
            </p>
            
            <div style="text-align: center; margin-top: 20px;">
                <a href="{{ url_for('register') }}" class="btn btn-default" style="display: inline-block; padding: 10px 30px; text-decoration: none;">
                    æ³¨å†Œæ–°è´¦å·
                </a>
            </div>
        </div>
    </div>
    
    <div class="auth-footer">
        <p>æŠ€æœ¯æ”¯æŒ Â© 2024</p>
    </div>
</div>

<script>
function refreshQRCode() {
    var img = document.getElementById('qrImage');
    img.src = "{{ url_for('login_qrcode') }}?t=" + new Date().getTime();
}

// æ¯5åˆ†é’Ÿè‡ªåŠ¨åˆ·æ–°äºŒç»´ç 
setInterval(refreshQRCode, 300000);
</script>
{% endblock %}
